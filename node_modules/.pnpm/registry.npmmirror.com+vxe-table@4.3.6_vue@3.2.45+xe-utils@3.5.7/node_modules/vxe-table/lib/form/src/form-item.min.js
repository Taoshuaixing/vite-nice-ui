"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formItemProps=exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=require("../../v-x-e-table"),_utils=require("../../tools/utils"),_vn=require("../../tools/vn"),_util=require("./util"),_render=require("./render");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,l=1,i=arguments.length;l<i;l++)for(var n in t=arguments[l])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},formItemProps={title:String,field:String,span:[String,Number],align:String,titleAlign:{type:String,default:null},titleWidth:{type:[String,Number],default:null},titleColon:{type:Boolean,default:null},titleAsterisk:{type:Boolean,default:null},className:[String,Function],titleOverflow:{type:[Boolean,String],default:null},titlePrefix:Object,titleSuffix:Object,resetValue:{default:null},visibleMethod:Function,visible:{type:Boolean,default:null},folding:Boolean,collapseNode:Boolean,itemRender:Object},_default=(exports.formItemProps=formItemProps,(0,_vue.defineComponent)({name:"VxeFormItem",props:formItemProps,setup:function(e,t){var t=t.slots,F=(0,_vue.ref)(),M=(0,_vue.inject)("$xeform",{}),l=(0,_vue.inject)("$xeformgather",null),w=(0,_vue.reactive)((0,_util.createItem)(M,e)),i={formItem:w},n={itemConfig:w};w.slots=t,(0,_vue.provide)("$xeformiteminfo",n),(0,_vue.provide)("$xeformitem",i),(0,_vue.provide)("$xeformgather",null),(0,_util.watchItem)(e,w),(0,_vue.onMounted)(function(){(0,_util.assemItem)(M,F.value,w,l)}),(0,_vue.onUnmounted)(function(){(0,_util.destroyItem)(M,w)});return{renderVN:function(){var t,e,l,i,n,r,o,u,s,a,f,d,v,c,m,_,p,g,x,h,N,b,q,y,I,O,C,U,S,A=M?M.props:null;return A&&A.customLayout?(A=w,h=(t=M).props,i=t.reactData,e=h.data,l=h.rules,N=h.titleAlign,b=h.titleWidth,q=h.titleColon,y=h.titleAsterisk,C=h.titleOverflow,i=i.collapseAll,n=t.getComputeMaps().computeValidOpts.value,g=A.slots,r=A.title,o=A.visible,u=A.folding,s=A.field,a=A.collapseNode,f=A.itemRender,d=A.showError,v=A.errRule,c=A.className,I=A.titleOverflow,m=(0,_utils.isEnableConf)(f)?_vXETable.VXETable.renderer.get(f.name):null,_=m?m.itemClassName:"",p=g?g.default:null,g=g?g.title:null,x=A.span||h.span,h=A.align||h.align,N=_xeUtils.default.eqNull(A.titleAlign)?N:A.titleAlign,b=_xeUtils.default.eqNull(A.titleWidth)?b:A.titleWidth,q=_xeUtils.default.eqNull(A.titleColon)?q:A.titleColon,y=_xeUtils.default.eqNull(A.titleAsterisk)?y:A.titleAsterisk,O=!0===(C=_xeUtils.default.isUndefined(I)||_xeUtils.default.isNull(I)?C:I)||"tooltip"===C,C=(I="title"===C)||O||"ellipsis"===C,(S=!(U={data:e,field:s,property:s,item:A,$form:t}))===o?(0,_vue.createCommentVNode)():(l&&(o=l[s])&&(S=o.some(function(e){return e.required})),l=[],p?l=t.callSlot(p,U):m&&m.renderItemContent?l=(0,_vn.getSlotVNs)(m.renderItemContent(f,U)):s&&(l=["".concat(_xeUtils.default.get(e,s))]),a&&l.push((0,_vue.h)("div",{class:"vxe-form--item-trigger-node",onClick:t.toggleCollapseEvent},[(0,_vue.h)("span",{class:"vxe-form--item-trigger-text"},i?_conf.default.i18n("vxe.form.unfolding"):_conf.default.i18n("vxe.form.folding")),(0,_vue.h)("i",{class:["vxe-form--item-trigger-icon",i?_conf.default.icon.FORM_FOLDING:_conf.default.icon.FORM_UNFOLDING]})])),v&&n.showMessage&&l.push((0,_vue.h)("div",{class:"vxe-form--item-valid",style:v.maxWidth?{width:"".concat(v.maxWidth,"px")}:null},v.message)),o=O?{onMouseenter:function(e){t.triggerTitleTipEvent(e,U)},onMouseleave:t.handleTitleTipLeaveEvent}:{},(0,_vue.h)("div",{ref:F,class:["vxe-form--item",A.id,x?"vxe-col--".concat(x," is--span"):"",c?_xeUtils.default.isFunction(c)?c(U):c:"",_?_xeUtils.default.isFunction(_)?_(U):_:"",{"is--title":r,"is--colon":q,"is--asterisk":y,"is--required":S,"is--hidden":u&&i,"is--active":(0,_util.isActivetem)(t,A),"is--error":d}]},[(0,_vue.h)("div",{class:"vxe-form--item-inner"},[r||g?(0,_vue.h)("div",__assign({class:["vxe-form--item-title",N?"align--".concat(N):null,{"is--ellipsis":C}],style:b?{width:isNaN(b)?b:"".concat(b,"px")}:null,title:I?(0,_utils.getFuncText)(r):null},o),(0,_render.renderTitle)(t,A)):null,(0,_vue.h)("div",{class:["vxe-form--item-content",h?"align--".concat(h):null]},l)])]))):(0,_vue.h)("div",{ref:F})}}},render:function(){return this.renderVN()}}));exports.default=_default;